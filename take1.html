<!doctype html>
<html>
<head>
  <title>Data structure visualizer take 1</title>
  <script src="underview.js"></script>
  <style type="text/css">
    #canvas {
      height: 500px;
      width: 500px;
    }
  </style> 
</head>
<body>

  <canvas id="canvas" width="100" height="100"></canvas>
  
  <p><button id="button" style="display:none">step</button></p>
  
  <script>
    
    /// setup
    var el = document.getElementById.bind(document)
    var ctx = el('canvas').getContext('2d')
    
    var pipeline = [flatten_each, valuation, colorize, shifter, drawer]
    var render = build_renderer(pipeline, ctx)
    
    /// helpers
    var take_random = function(n) { x=[]; for(i=0, l=n||99; i<l; i++) x.push(rand()); return x }
    var take_sequential = function(n) { x=[]; for(i=0, l=n||99; i<l; i++) x.push(i+1); return x }
    
    var button = el('button')
    button.addEventListener('click', function() {y.push(rand()); y.shift()})
    
    /// do this part live
    /*
    
    x = take_sequential(100)
    
    render(x)
    
    y = take_random(100)
    
    render(y)
    
    flatten(y)

    flatten([1, [2, [3, 4]]])
    
    Array.observe(y, function(c) {
      render(y)
    });
    
    y.push(1)
    
    y.push(rand()); y.shift()
    
    button.style.display = ''
    
    showBlack()
    
    */
  </script>
  
</body>  
</html>